apply plugin: 'scala'


repositories {
    mavenCentral()
}


dependencies {
    ext.gatlingVersion = '2.2.5'
    compile group: 'io.gatling', name: 'gatling-app', version: gatlingVersion
    compile group: 'io.gatling', name: 'gatling-recorder', version: gatlingVersion
    compile group: 'io.gatling.highcharts', name: 'gatling-charts-highcharts', version: gatlingVersion
    //compile group: 'org.apache.logging.log4j', name: 'log4j-to-slf4j', version: '2.11.0'
    compile group: 'org.apache.logging.log4j', name: 'log4j-api', version: '2.11.0'
    compile group: 'org.apache.logging.log4j', name: 'log4j-core', version: '2.11.0'

}


task queryProfileLoadTest(dependsOn: 'compileTestScala') << {
    javaexec {

        classpath = sourceSets.test.runtimeClasspath + sourceSets.test.resources
        //classpath += sourceSets.test.resources
        main = 'io.gatling.app.Gatling'
          args  '-s', 'performance.simulations.Injector',                   //The simulation to run
                '-rf', 'build/reports/gatling'            //place to put the report
    }
}

